<header class="main-header">
    <!-- Logo -->
    <a href="/index" class="logo">
        <!-- mini logo for sidebar mini 50x50 pixels -->
        <span class="logo-mini"><b>LTE</b></span>
        <!-- logo for regular state and mobile devices -->
        <span class="logo-lg"><b>Admin</b>LTE</span>
    </a>
    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
        <!-- Sidebar toggle button-->
        <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
        </a>
        <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
                <!--任务-->
                <!--<li class="dropdown tasks-menu">-->
                    <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown">-->
                        <!--<i class="fa fa-calendar-check-o"></i>-->
                        <!--<span id="event-count1" class="label label-danger"></span>-->
                    <!--</a>-->
                    <!--<ul class="dropdown-menu">-->
                        <!--<li class="header">你有<span id="event-count2"></span>个待办事项</li>-->
                        <!--<li>-->
                            <!--&lt;!&ndash; inner menu: contains the actual data &ndash;&gt;-->
                            <!--<ul class="menu" id="event-parent">-->
                                <!--<li>-->
                                    <!--&lt;!&ndash;&lt;!&ndash; Task item &ndash;&gt;&ndash;&gt;-->
                                    <!--<a href="#">-->
                                        <!--<h3>-->
                                            <!--Design some buttons-->
                                            <!--<small class="pull-right">20%</small>-->
                                        <!--</h3>-->
                                        <!--<div class="progress xs">-->
                                            <!--<div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">-->
                                                <!--<span class="sr-only">20% Complete</span>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</a>-->
                                <!--</li>-->
                                <!--&lt;!&ndash; end task item &ndash;&gt;-->
                            <!--</ul>-->
                        <!--</li>-->
                        <!--<li class="footer">-->
                            <!--<a href="/event/findAll">查看所有事项</a>-->
                        <!--</li>-->
                    <!--</ul>-->
                <!--</li>-->
                <!--邮件-->
                <li class="dropdown messages-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-envelope-o"></i>
                        <span id="mail-count1" class="label label-success"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="header">你有<span id="mail-count2"></span>个未读邮件</li>
                        <li> <!--&lt;!&ndash; inner menu: contains the actual data &ndash;&gt;-->
                            <ul id="mail-parent" class="menu">
                                <!--<li>-->
                                    <!--<a href="#">-->
                                        <!--<div class="pull-left">-->
                                            <!--<img src="/img/user4-128x128.jpg" class="img-circle" alt="User Image">-->
                                        <!--</div>-->
                                        <!--<h4>-->
                                            <!--Developers-->
                                            <!--<small><i class="fa fa-clock-o"></i> Today</small>-->
                                        <!--</h4>-->
                                        <!--<p>Why not buy a new awesome theme?</p>-->
                                    <!--</a>-->
                                <!--</li>-->
                            </ul>
                        </li>
                        <li class="footer"><a href="/email/list">查看所有邮件</a></li>
                    </ul>
                </li>
                 <!--Notifications: style can be found in dropdown.less-->
                <!--<li class="dropdown notifications-menu">-->
                    <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown">-->
                        <!--<i class="fa fa-bell-o"></i>-->
                        <!--<span class="label label-warning">5</span>-->
                    <!--</a>-->
                    <!--<ul class="dropdown-menu">-->
                        <!--<li class="header">你有5个新消息</li>-->
                        <!--<li>-->
                            <!--&lt;!&ndash; inner menu: contains the actual data &ndash;&gt;-->
                            <!--<ul class="menu">-->
                                <!--<li>-->
                                    <!--<a href="#">-->
                                        <!--<i class="fa fa-users text-aqua"></i> 5 new members joined today-->
                                    <!--</a>-->
                                <!--</li>-->
                            <!--</ul>-->
                        <!--</li>-->
                        <!--<li class="footer"><a href="#">View all</a></li>-->
                    <!--</ul>-->
                <!--</li>-->
                <!--用户-->
                <li class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <img src="/img/user2-160x160.jpg" class="user-image" alt="User Image">
                        <span id="username1" class="hidden-xs"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="/img/user2-160x160.jpg" class="imgcircle"
                                 alt="User Image">
                            <p>
                                <span id="username2"></span>
                                <small>最后登录时间:<span id="login-time"></span></small>
                            </p>
                        </li>
                        <!-- Menu Footer-->
                        <li class="user-footer">
                            <div class="pull-left">
                                <a href="/profile" class="btn btn-default btn-flat">个人中心</a>
                            </div>
                            <div class="pull-right">
                                <a href="/" class="btn btn-default btn-flat">注销</a>
                            </div>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>
    <script>
        // 没有找到缓存则重新登录
        if (!window.localStorage.hasOwnProperty("username") || !window.localStorage.hasOwnProperty("authorities")
            || !window.localStorage.hasOwnProperty("loginTime")) {
            location.href="/";
        }
        // 导航栏用户名
        var username = window.localStorage.getItem("username");
        document.getElementById("username1").innerText=username;
        document.getElementById("username2").innerText=username;
        // 最后登录时间
        var loginTime = window.localStorage.getItem("loginTime");
        document.getElementById("login-time").innerText=loginTime;
        // 邮件
        var mail = JSON.parse(window.localStorage.getItem("mail"));
        if (mail.length != 0) {
            document.getElementById("mail-count1").innerText=mail.length;
        }
        document.getElementById("mail-count2").innerText=mail.length;
        var parent = document.getElementById("mail-parent");
        for (var i = 0; i < mail.length; i++) {
            var li = document.createElement("li");
            parent.appendChild(li);
                var a = document.createElement("a");
                a.setAttribute("href", "/email/detail/" + mail[i].id);
                li.appendChild(a);
                    var div = document.createElement("div");
                    div.setAttribute("class", "pull-left");
                    a.appendChild(div);
                        var img = document.createElement("img");
                        img.setAttribute("src", "/img/email.png");
                        img.setAttribute("class", "img-circle");
                        img.setAttribute("alt", "User Image");
                        div.appendChild(img);
                    var h4 = document.createElement("h4");
                    a.appendChild(h4);
                        var s1 = document.createElement("span");
                        s1.setAttribute("style", "display:block; width:80px;overflow:hidden;");
                        s1.innerText = mail[i].sender;
                        h4.appendChild(s1);
                        var small = document.createElement("small");
                        h4.appendChild(small);
                            // var i = document.createElement("i");
                            // i.setAttribute("class", "fa fa-clock-o");
                            // small.appendChild(i);
                            var s2 = document.createElement("span");
                            s2.innerText = mail[i].sentDate;
                            small.appendChild(s2);
                    var p = document.createElement("p");
                    p.innerText = mail[i].subject;
                    a.appendChild(p);
        }
    </script>
</header>