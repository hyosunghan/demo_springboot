<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>淘宝购物车页面</title>
<link href="css/myCart.css" type="text/css" rel="stylesheet" />
</head>

<body>
	<div id="header">
		<img src="images/taobao_logo.gif" alt="logo" />
	</div>
	<div id="nav">
		您的位置：<a href="#">首页</a> > <a href="#">我的淘宝</a> > 我的购物车
	</div>
	<div id="navlist">
		<ul>
			<li class="navlist_red_left"></li>
			<li class="navlist_red">1.查看购物车</li>
			<li class="navlist_red_arrow"></li>
			<li class="navlist_gray">2. 确认订单信息</li>
			<li class="navlist_gray_arrow"></li>
			<li class="navlist_gray">3. 付款到支付宝</li>
			<li class="navlist_gray_arrow"></li>
			<li class="navlist_gray">4. 确认收货</li>
			<li class="navlist_gray_arrow"></li>
			<li class="navlist_gray">5. 评价</li>
			<li class="navlist_gray_right"></li>
		</ul>
	</div>

	<div id="content">
		<form action="" method="post" name="myform">
			<table width="100%" border="0" cellspacing="0" cellpadding="0"
				id="shopping">
              <tbody>
				<tr>
					<td class="title_1"><input id="allCheckBox" type="checkbox"
						value="" onclick="selectAll();" />全选</td>
					<td class="title_2" colspan="2">店铺宝贝</td>
					<td class="title_3">获积分</td>
					<td class="title_4">单价（元）</td>
					<td class="title_5">数量</td>
					<td class="title_6">小计（元）</td>
					<td class="title_7">操作</td>
				</tr>
				<tr>
					<td colspan="8" class="line"></td>
				</tr>
			</tbody>
				
				<tbody>
					<tr>
						<td colspan="8" class="shopInfo">店铺：<a href="#">纤巧百媚时尚鞋坊</a>
							卖家：<a href="#">纤巧百媚</a> <img src="images/taobao_relation.jpg"
							alt="relation" /></td>
					</tr>
					<tr id="product1">
						<td class="cart_td_1"><input name="cartCheckBox"
							type="checkbox" value="product1" onclick="#" /></td>
						<td class="cart_td_2"><img src="images/taobao_cart_01.jpg"
							alt="shopping" /></td>
						<td class="cart_td_3"><a href="#">日韩流行风时尚美眉最爱独特米字拼图金属坡跟公主靴子黑色</a><br />
							颜色：棕色 尺码：37<br /> 保障：<img src="images/taobao_icon_01.jpg"
							alt="icon" /></td>
						<td class="cart_td_4">5</td>
						<td class="cart_td_5">138.00</td>
						<td class="cart_td_6"><img src="images/taobao_minus.jpg"
							alt="minus" onclick="changeBuyNumber(0,this);" class="hand" /><input id="num_1"
							type="text" value="1" class="num_input" readonly="readonly" /><img
							src="images/taobao_adding.jpg" alt="add" onclick="changeBuyNumber(1,this);" class="hand" /></td>
						<td class="cart_td_7"></td>
						<td class="cart_td_8"><a href="#"  onclick="del(this);">删除</a></td>
					</tr>
                </tbody>
                
                <tbody>
					<tr>
						<td colspan="8" class="shopInfo">店铺：<a href="#">香港我的美丽日记</a>
							卖家：<a href="#">lokemick2009</a> <img
							src="images/taobao_relation.jpg" alt="relation" /></td>
					</tr>
					<tr id="product2">
						<td class="cart_td_1"><input name="cartCheckBox"
							type="checkbox" value="product2" onclick="#" /></td>
						<td class="cart_td_2"><img src="images/taobao_cart_02.jpg"
							alt="shopping" /></td>
						<td class="cart_td_3"><a href="#">chanel/香奈尔/香奈尔炫亮魅力唇膏3.5g</a><br />
							保障：<img src="images/taobao_icon_01.jpg" alt="icon" /> <img
							src="images/taobao_icon_02.jpg" alt="icon" /></td>
						<td class="cart_td_4">12</td>
						<td class="cart_td_5">265.00</td>
						<td class="cart_td_6"><img src="images/taobao_minus.jpg"
							alt="minus" onclick="changeBuyNumber(0,this);" class="hand" /><input id="num_2"
							type="text" value="1" class="num_input" readonly="readonly" /><img
							src="images/taobao_adding.jpg" alt="add" onclick="changeBuyNumber(1,this);" class="hand" /></td>
						<td class="cart_td_7"></td>
						<td class="cart_td_8"><a href="#" onclick="del(this);">删除</a></td>
					</tr>
                </tbody>

                <tbody>
					<tr>
						<td colspan="8" class="shopInfo">店铺：<a href="#">实体经营</a> 卖家：<a
							href="#">林颜店铺</a> <img src="images/taobao_relation.jpg"
							alt="relation" /></td>
					</tr>
					<tr id="product3">
						<td class="cart_td_1"><input name="cartCheckBox"
							type="checkbox" value="product3" onclick="#" /></td>
						<td class="cart_td_2"><img src="images/taobao_cart_03.jpg"
							alt="shopping" /></td>
						<td class="cart_td_3"><a href="#">蝶妆海�蓝清滢粉底液10#（象牙白）</a><br />
							保障：<img src="images/taobao_icon_01.jpg" alt="icon" /> <img
							src="images/taobao_icon_02.jpg" alt="icon" /></td>
						<td class="cart_td_4">3</td>
						<td class="cart_td_5">85.00</td>
						<td class="cart_td_6"><img src="images/taobao_minus.jpg"
							alt="minus" onclick="changeBuyNumber(0,this);" class="hand" /><input id="num_3"
							type="text" value="1" class="num_input" readonly="readonly" /><img
							src="images/taobao_adding.jpg" alt="add" onclick="changeBuyNumber(1,this);" class="hand" /></td>
						<td class="cart_td_7"></td>
						<td class="cart_td_8"><a href="#" onclick="del(this);">删除</a></td>
					</tr>
                </tbody>
                
                <tbody>
					<tr>
						<td colspan="8" class="shopInfo">店铺：<a href="#">红豆豆的小屋</a> 卖家：<a
							href="#">taobao豆豆</a> <img src="images/taobao_relation.jpg"
							alt="relation" /></td>
					</tr>
					<tr id="product4">
						<td class="cart_td_1"><input name="cartCheckBox"
							type="checkbox" value="product4" onclick="#" /></td>
						<td class="cart_td_2"><img src="images/taobao_cart_04.jpg"
							alt="shopping" /></td>
						<td class="cart_td_3"><a href="#">相宜促销专供 大S推荐
								最好用的LilyBell化妆棉</a><br/> 保障：<img src="images/taobao_icon_01.jpg"
							alt="icon" /></td>
						<td class="cart_td_4">12</td>
						<td class="cart_td_5">12.00</td>
						<td class="cart_td_6"><img src="images/taobao_minus.jpg"
							alt="minus" onclick="changeBuyNumber(0,this);" class="hand" /><input id="num_4"
							type="text" value="1" class="num_input" readonly="readonly" /><img
							src="images/taobao_adding.jpg" alt="add" onclick="changeBuyNumber(1,this);" class="hand" /></td>
						<td class="cart_td_7"></td>
						<td class="cart_td_8"><a href="#" onclick="del(this);">删除</a></td>
					</tr>
                </tbody>
                
                <tbody>
					<tr>
						<td colspan="3"><a href="#"><img
								src="images/taobao_del.jpg" alt="delete" /></a></td>
						<td colspan="5" class="shopend">商品总价（不含运费）：<label id="total"
							class="yellow"></label> 元<br /> 可获积分 <label class="yellow"
							id="integral"></label> 点<br /> <input name=" " type="image"
							src="images/taobao_subtn.jpg" /></td>
					</tr>
				</tbody>
			</table>
		</form>
		
		<script type="text/javascript">
		   
		   //删除所选商品
		   function del(obj)
		   {
			   alert("执行删除...");
			   var trNode = obj.parentNode.parentNode.parentNode;
		       //表格节点
		       var tbNode = document.getElementById("shopping");
		       tbNode.removeChild(trNode);
		       calTotalPrice();
		   }
		
		   //实现全选
		   function selectAll()
	       {
	    	   var nodes = document.getElementsByName("cartCheckBox");
	    	   for(var i=0;i<nodes.length;i++)
	    	   {
	    		   nodes[i].checked = document.getElementById("allCheckBox").checked;
	    	   }	   
	    	   
	       }
		
		   //初始化总价格和小计数量
		   function calTotalPrice()
		   {
			    var priceNodes = document.getElementsByClassName("cart_td_5");
			    var buyNumberNodes = document.getElementsByClassName("num_input");
			    var xjNodes = document.getElementsByClassName("cart_td_7");
			    var totalPrice = 0.0;
			    for(var i=0;i<priceNodes.length;i++)
			    {
			    	var price = parseFloat(priceNodes[i].innerText);
			    	var number = parseInt(buyNumberNodes[i].value);
			    	var xj = price * number;
			    	xjNodes[i].innerText = xj;
			    	totalPrice +=xj;
			    } 	
			    document.getElementById("total").innerText=totalPrice;
		   }
		
		
		   function changeBuyNumber(type,obj)
		   {
			  //获取你购买的数量。
			  var numberNode; //数量节点.
			  var priceNode =obj.parentNode.previousSibling.previousSibling ; //获得单价节点;
			  //alert(priceNode.innerText);
			  var xjNode = obj.parentNode.nextSibling.nextSibling;
			  var totalPriceNode = document.getElementById("total");
			  
			  var xj = parseFloat(xjNode.innerText);//小计
			  var price = parseFloat(priceNode.innerText) ; //商品单价
			  var totalPrice = parseFloat(totalPriceNode.innerText); //总金额
			  
			  var number;
			  if(type==0)
			  {
				  //找后面的兄弟节点。
				  numberNode = obj.nextSibling;
			  }
			  else
		      {
				  //获得前一个兄弟节点
				  numberNode = obj.previousSibling;
		      }
			  number = numberNode.value;
			  if(type==0)
			  {
				  if(number<=1)
				  {
					  return;
				  }	  
				  else
				  {
					  numberNode.value = --number; 
					  xjNode.innerText = xj-price;
					  totalPriceNode.innerText = totalPrice-price;
					  
				  }
			  }
			  else
			  {
				  if(number>=100)
				  {
					  return ;
				  }	  
				  else
				  {
					  numberNode.value = ++number;
					  xjNode.innerText = xj+price;
					  totalPriceNode.innerText = totalPrice+price;
				  }	  
			  }	  
		   }
		   
		   
		   window.onload = calTotalPrice();
		</script>
	</div>
</body>
</html>
